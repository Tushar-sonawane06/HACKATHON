<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber AI Summarizer & Citation Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
body {
    margin:0; font-family:'Orbitron',sans-serif; background:#0d0d0d; color:#00ffea; display:flex; flex-direction:column; min-height:100vh;
}
header, footer {
    text-align:center; padding:1rem; background:#111; border-bottom:1px solid #00ffea; box-shadow:0 2px 10px #00ffea33;
}
h1 {font-size:2.5rem; font-weight:700; letter-spacing:2px; color:#00ffea;}
main.content {flex-grow:1; display:flex; justify-content:center; align-items:center; padding:2rem;}
.card {
    background:#111111cc; border:2px solid #00ffea; border-radius:20px; padding:3rem; width:700px;
    text-align:center; box-shadow:0 0 40px #00ffea44; transition:0.3s transform;
}
.card:hover {transform:scale(1.02);}
#drop-zone {
    border:2px dashed #00ffea; padding:50px; border-radius:16px; cursor:pointer; font-weight:700;
    transition:0.3s background, 0.3s transform;
}
#drop-zone.hover {background:#00ffea11; transform:scale(1.03);}
.btn {background:#ff0055; color:#fff; border:none; padding:12px 28px; border-radius:12px; cursor:pointer; font-size:1rem; margin-top:15px; transition:0.3s; font-weight:700;}
.btn:hover {background:#ff3399; transform:scale(1.05);}
.result, .error {margin-top:20px; padding:1.5rem; border-radius:16px; text-align:left; max-height:300px; overflow-y:auto; font-family:'Orbitron', monospace; transition:0.5s; opacity:0; transform:translateY(20px);}
.result.show, .error.show {opacity:1; transform:translateY(0);}
.result {background:#00ffea11; border-left:4px solid #00ffea;}
.error {background:#ff005511; border-left:4px solid #ff0055;}
ul {padding-left:20px;}
.progress-bar {height:6px; background:#00ffea; width:0; margin-top:10px; border-radius:3px; transition:width 0.5s;}
</style>
</head>
<body>

<header><h1>‚ö° Cyber AI Summarizer</h1></header>

<main class="content">
<div class="card">
<h2>Upload & Summarize Your Document</h2>
<div id="drop-zone">Drop .txt, .pdf, .docx or click here</div>
<input type="file" id="file-input" style="display:none;">
<div class="progress-bar" id="progress"></div>
<div class="error" id="error"></div>
<div class="result" id="result"></div>
<button class="btn" id="reset-btn" style="display:none;">Reset</button>
</div>
</main>

<footer><p>Built with ‚ù§Ô∏è using Flask & AI | Cyber Hack Mode</p></footer>

<script>
const dropZone = document.getElementById("drop-zone");
const fileInput = document.getElementById("file-input");
const resultBox = document.getElementById("result");
const errorBox = document.getElementById("error");
const resetBtn = document.getElementById("reset-btn");
const progress = document.getElementById("progress");

dropZone.addEventListener("click", ()=>fileInput.click());
dropZone.addEventListener("dragover", e=>{e.preventDefault(); dropZone.classList.add("hover");});
dropZone.addEventListener("dragleave", ()=>dropZone.classList.remove("hover"));
dropZone.addEventListener("drop", e=>{e.preventDefault(); dropZone.classList.remove("hover"); handleFile(e.dataTransfer.files[0]);});
fileInput.addEventListener("change", ()=>handleFile(fileInput.files[0]));

resetBtn.addEventListener("click", ()=>{
    resultBox.innerHTML=""; errorBox.innerHTML=""; progress.style.width="0";
    resultBox.style.display="none"; errorBox.style.display="none"; resetBtn.style.display="none";
});

function handleFile(file){
    if(!file) return;
    resultBox.classList.remove("show"); errorBox.classList.remove("show"); progress.style.width="0"; resetBtn.style.display="none";
    errorBox.style.display="none"; resultBox.style.display="none";

    const formData = new FormData();
    formData.append("file", file);

    // Show processing
    resultBox.style.display="block";
    resultBox.innerHTML="<b>‚ö° AI is analyzing your document...</b>";
    resultBox.classList.add("show");
    
    let prog = 0;
    const interval = setInterval(()=>{prog+=10; progress.style.width=prog+"%"; if(prog>=100) clearInterval(interval);},100);

    fetch("/upload",{method:"POST", body:formData})
    .then(res=>res.json())
    .then(data=>{
        progress.style.width="100%";
        if(data.error){
            errorBox.style.display="block"; errorBox.textContent=data.error; errorBox.classList.add("show");
            resultBox.style.display="none";
        } else {
            resultBox.innerHTML = `<h3>‚ú® Summary of ${data.filename}</h3>
                                   <p>${data.summary}</p>
                                   <h3>üìö Citations Found</h3>
                                   <ul>${data.citations.map(c=><li>${c}</li>).join('')}</ul>`;
            resultBox.classList.add("show");
            resetBtn.style.display="inline-block";
        }
    })
    .catch(err=>{
        errorBox.style.display="block"; errorBox.textContent="Upload failed!"; errorBox.classList.add("show");
        resultBox.style.display="none"; console.error(err);
    });
}
</script>

</body>
</html>